const PRODUCT_PRICES = {
    '액티 시리즈': {
        회원기준: 32000,
        '5+1 단품': 24200,
        '5+1 세트': 145200,
        오토십: 30400,
        BA: 28800,
        액션팩: 28800,
        points: {
            회원기준: 32,
            '5+1 단품': 24.2,
            '5+1 세트': 145,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '액티펀치': {
        회원기준: 32000,
        '5+1 단품': 24000,
        '5+1 세트': 144000,
        오토십: 30400,
        BA: 28800,
        액션팩: 28800,
        points: {
            회원기준: 32,
            '5+1 단품': 24.0,
            '5+1 세트': 144,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '액티 투 고': {
        회원기준: 12000,
        '5+1 단품': 9000,
        '5+1 세트': 54000,
        오토십: 11400,
        BA: 10800,
        액션팩: 10800,
        points: {
            회원기준: 12,
            '5+1 단품': 9.0,
            '5+1 세트': 54,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '피트니스 드링크': {
        회원기준: 37000,
        '5+1 단품': 30000,
        '5+1 세트': 180000,
        오토십: 35150,
        BA: 33300,
        액션팩: 33300,
        points: {
            회원기준: 37,
            '5+1 단품': 30.0,
            '5+1 세트': 180,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '젤슈츠': {
        회원기준: 40000,
        '5+1 단품': 30000,
        '5+1 세트': 180000,
        오토십: 38000,
        BA: 36000,
        액션팩: 36000,
        points: {
            회원기준: 40,
            '5+1 단품': 30.0,
            '5+1 세트': 180,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '요거트 드링크': {
        회원기준: 23000,
        '5+1 단품': 16700,
        '5+1 세트': 100200,
        오토십: 21850,
        BA: 20700,
        액션팩: 20700,
        points: {
            회원기준: 23,
            '5+1 단품': 16.7,
            '5+1 세트': 100,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    'D-드링크': {
        회원기준: 25000,
        '5+1 단품': 16700,
        '5+1 세트': 100200,
        오토십: 23750,
        BA: 22500,
        액션팩: 22500,
        points: {
            회원기준: 25,
            '5+1 단품': 16.7,
            '5+1 세트': 100,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '제너레이션': {
        회원기준: 80000,
        '5+1 단품': 60000,
        '5+1 세트': 360000,
        오토십: 76000,
        BA: 72000,
        액션팩: 72000,
        points: {
            회원기준: 80,
            '5+1 단품': 60.0,
            '5+1 세트': 360,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '듀오': {
        회원기준: 50000,
        '5+1 단품': 38300,
        '5+1 세트': 229800,
        오토십: 47500,
        BA: 45000,
        액션팩: 45000,
        points: {
            회원기준: 50,
            '5+1 단품': 38.3,
            '5+1 세트': 230,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '오메가3': {
        회원기준: 26000,
        '5+1 단품': 19500,
        '5+1 세트': 117000,
        오토십: 24700,
        BA: 23400,
        액션팩: 23400,
        points: {
            회원기준: 26,
            '5+1 단품': 19.5,
            '5+1 세트': 117,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '큐10 플러스': {
        회원기준: 26000,
        '5+1 단품': 19500,
        '5+1 세트': 117000,
        오토십: 24700,
        BA: 23400,
        액션팩: 23400,
        points: {
            회원기준: 26,
            '5+1 단품': 19.5,
            '5+1 세트': 117,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '뮤노겐': {
        회원기준: 50000,
        '5+1 단품': 37500,
        '5+1 세트': 225000,
        오토십: 47500,
        BA: 45000,
        액션팩: 45000,
        points: {
            회원기준: 50,
            '5+1 단품': 37.5,
            '5+1 세트': 225,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '뷰티': {
        회원기준: 40000,
        '5+1 단품': 31700,
        '5+1 세트': 190200,
        오토십: 38000,
        BA: 36000,
        액션팩: 36000,
        points: {
            회원기준: 40,
            '5+1 단품': 31.7,
            '5+1 세트': 190,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    'C-밸런스': {
        회원기준: 28000,
        '5+1 단품': 21000,
        '5+1 세트': 126000,
        오토십: 26600,
        BA: 25200,
        액션팩: 25200,
        points: {
            회원기준: 28,
            '5+1 단품': 21.0,
            '5+1 세트': 126,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '겔링핏': {
        회원기준: 51000,
        '5+1 단품': 36700,
        '5+1 세트': 220200,
        오토십: 48450,
        BA: 45900,
        액션팩: 45900,
        points: {
            회원기준: 51,
            '5+1 단품': 36.7,
            '5+1 세트': 220,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '액티브 젤': {
        회원기준: 23000,
        '5+1 단품': 16700,
        '5+1 세트': 100200,
        오토십: 21850,
        BA: 20700,
        액션팩: 20700,
        points: {
            회원기준: 23,
            '5+1 단품': 16.7,
            '5+1 세트': 100,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '맨플러스': {
        회원기준: 40000,
        '5+1 단품': 30000,
        '5+1 세트': 180000,
        오토십: 38000,
        BA: 36000,
        액션팩: 36000,
        points: {
            회원기준: 40,
            '5+1 단품': 30.0,
            '5+1 세트': 180,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '허벌티': {
        회원기준: 8000,
        '5+1 단품': 5700,
        '5+1 세트': 34200,
        오토십: 7600,
        BA: 7200,
        액션팩: 7200,
        points: {
            회원기준: 8,
            '5+1 단품': 5.7,
            '5+1 세트': 34,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '탑쉐이프': {
        회원기준: 70000,
        '5+1 단품': 52500,
        '5+1 세트': 315000,
        오토십: 66500,
        BA: 63000,
        액션팩: 63000,
        points: {
            회원기준: 70,
            '5+1 단품': 52.5,
            '5+1 세트': 315,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '아이비5(IB5)': {
        회원기준: 25000,
        오토십: 23750,
        BA: 22500,
        액션팩: 22500,
        points: {
            회원기준: 25,
            '5+1 단품': 0,
            '5+1 세트': 0,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '프로 시리즈': {
        회원기준: 20000,
        '5+1 단품': 16700,
        '5+1 세트': 100200,
        오토십: 19000,
        BA: 18000,
        액션팩: 18000,
        points: {
            회원기준: 20,
            '5+1 단품': 16.7,
            '5+1 세트': 100,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '웨이': {
        회원기준: 25000,
        오토십: 23750,
        BA: 22500,
        액션팩: 22500,
        points: {
            회원기준: 25,
            '5+1 단품': 0,
            '5+1 세트': 0,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '주니어': {
        회원기준: 25000,
        오토십: 23750,
        BA: 22500,
        액션팩: 22500,
        points: {
            회원기준: 25,
            '5+1 단품': 0,
            '5+1 세트': 0,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '맨 페이스': {
        회원기준: 25000,
        '5+1 단품': 18700,
        '5+1 세트': 112200,
        오토십: 23750,
        BA: 22500,
        액션팩: 22500,
        points: {
            회원기준: 25,
            '5+1 단품': 18.7,
            '5+1 세트': 112,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '액티 세럼': {
        회원기준: 40000,
        '5+1 단품': 30000,
        '5+1 세트': 180000,
        오토십: 38000,
        BA: 36000,
        액션팩: 36000,
        points: {
            회원기준: 40,
            '5+1 단품': 30.0,
            '5+1 세트': 180,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '브라이트닝 포에버': {
        회원기준: 50000,
        오토십: 47500,
        BA: 45000,
        액션팩: 45000,
        points: {
            회원기준: 50,
            '5+1 단품': 0,
            '5+1 세트': 0,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '클렌징폼': {
        회원기준: 10000,
        오토십: 9500,
        BA: 9000,
        액션팩: 9000,
        points: {
            회원기준: 10,
            '5+1 단품': 0,
            '5+1 세트': 0,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '밸런싱크림': {
        회원기준: 12000,
        오토십: 11400,
        BA: 10800,
        액션팩: 10800,
        points: {
            회원기준: 12,
            '5+1 단품': 0,
            '5+1 세트': 0,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '필링마스크': {
        회원기준: 10000,
        오토십: 9500,
        BA: 9000,
        액션팩: 9000,
        points: {
            회원기준: 10,
            '5+1 단품': 0,
            '5+1 세트': 0,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '영케어 세트': {
        회원기준: 25000,
        '5+1 단품': 16300,
        '5+1 세트': 97800,
        오토십: 23750,
        BA: 22500,
        액션팩: 22500,
        points: {
            회원기준: 25,
            '5+1 단품': 16.3,
            '5+1 세트': 98,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '하이드레이팅 샷 마스크': {
        회원기준: 40000,
        '5+1 단품': 33300,
        '5+1 세트': 199800,
        오토십: 38000,
        BA: 36000,
        액션팩: 36000,
        points: {
            회원기준: 40,
            '5+1 단품': 33.3,
            '5+1 세트': 200,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '브라이트닝 샷 마스크': {
        회원기준: 40000,
        '5+1 단품': 33300,
        '5+1 세트': 199800,
        오토십: 38000,
        BA: 36000,
        액션팩: 36000,
        points: {
            회원기준: 40,
            '5+1 단품': 33.3,
            '5+1 세트': 200,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '요거트 메이커': {
        회원기준: 0,
        오토십: 0,
        BA: 0,
        액션팩: 0,
        points: {
            회원기준: 0,
            '5+1 단품': 0,
            '5+1 세트': 0,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '티인퓨저': {
        회원기준: 0,
        오토십: 0,
        BA: 0,
        액션팩: 0,
        points: {
            회원기준: 0,
            '5+1 단품': 0,
            '5+1 세트': 0,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '데모백': {
        회원기준: 0,
        오토십: 0,
        BA: 0,
        액션팩: 0,
        points: {
            회원기준: 0,
            '5+1 단품': 0,
            '5+1 세트': 0,
            오토십: 0,
            BA: 0,
            액션팩: 0
        }
    },
    '파워': {
        회원기준: 89000,
        오토십: 86500,
        BA: 84000,
        액션팩: 84000,
        points: {
            회원기준: 89,
            '5+1 단품': 0,
            '5+1 세트': 0,
            오토십: 86.5,
            BA: 84,
            액션팩: 84
        }
    },
    '리스': {
        회원기준: 17000,
        오토십: 16500,
        BA: 16000,
        액션팩: 16000,
        points: {
            회원기준: 17,
            '5+1 단품': 0,
            '5+1 세트': 0,
            오토십: 16.5,
            BA: 16,
            액션팩: 16
        }
    }
};

// 제품 검색 함수
function findProduct(productName) {
    const normalizedName = productName.toLowerCase().trim();

    for (const [key, value] of Object.entries(PRODUCT_PRICES)) {
        if (key.toLowerCase().includes(normalizedName) || 
            normalizedName.includes(key.toLowerCase())) {
            return { name: key, data: value };
        }
    }
    return null;
}

// 가격 계산 함수
function calculatePrice(productName, priceType = '회원기준') {
    const product = findProduct(productName);
    if (!product) {
        return { error: '제품을 찾을 수 없습니다.' };
    }

    const price = product.data[priceType];
    const points = product.data.points[priceType];

    return {
        product: product.name,
        priceType: priceType,
        price: price,
        points: points,
        formatted: `${price?.toLocaleString()}원 (${points}P)`
    };
}

// 모든 가격 정보 조회 함수
function getAllPrices(productName) {
    const product = findProduct(productName);
    if (!product) {
        return { error: '제품을 찾을 수 없습니다.' };
    }

    const result = {
        product: product.name,
        prices: {},
        points: product.data.points
    };

    for (const [priceType, price] of Object.entries(product.data)) {
        if (priceType !== 'points') {
            result.prices[priceType] = {
                price: price,
                points: product.data.points[priceType],
                formatted: `${price?.toLocaleString()}원 (${product.data.points[priceType]}P)`
            };
        }
    }

    return result;
}

// 포인트 계산 함수
function calculatePoints(productName, priceType = '회원기준') {
    const product = findProduct(productName);
    if (!product) {
        return { error: '제품을 찾을 수 없습니다.' };
    }

    return {
        product: product.name,
        priceType: priceType,
        points: product.data.points[priceType]
    };
}

// 내보내기 (Node.js 환경에서 사용 시)
if (typeof module !== 'undefined' && module.exports) {
    module.exports = {
        PRODUCT_PRICES,
        findProduct,
        calculatePrice,
        getAllPrices,
        calculatePoints
    };
}